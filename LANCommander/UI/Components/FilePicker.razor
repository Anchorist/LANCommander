@using LANCommander.Models
@using System.IO.Compression
@inject ModalService ModalService
@inject ArchiveService ArchiveService

<Space Style="display: flex">
    <SpaceItem Style="flex-grow: 1">
        <Input Type="text" @bind-Value="Value" OnChange="ValueChanged" />
    </SpaceItem>
    <SpaceItem>
        <FilePickerButton
            Type="@ButtonType.Primary"
            Icon="@IconType.Outline.FolderOpen"
            ArchiveId="@ArchiveId"
            @bind-Value="@Value"
            Title="@Title"
            OkText="@OkText"
            AllowDirectories="@AllowDirectories"
            Prefix="@Prefix"
            Root="@Root"
            EntrySelectable="@EntrySelectable"
            EntryVisible="@EntryVisible" />
    </SpaceItem>
</Space>

@code {
    [Parameter] public string Value { get; set; }
    [Parameter] public EventCallback<string> ValueChanged { get; set; }
    [Parameter] public EventCallback<string> OnSelected { get; set; }
    [Parameter] public Guid ArchiveId { get; set; }
    [Parameter] public string Title { get; set; } = "Choose File";
    [Parameter] public string OkText { get; set; } = "Select File";
    [Parameter] public bool AllowDirectories { get; set; } = false;
    [Parameter] public string Prefix { get; set; }
    [Parameter] public string Root { get; set; }
    [Parameter] public Func<IFileManagerEntry, bool> EntrySelectable { get; set; } = _ => true;
    [Parameter] public Func<IFileManagerEntry, bool> EntryVisible { get; set; } = _ => true;
}